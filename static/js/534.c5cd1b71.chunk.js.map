{"version":3,"file":"static/js/534.c5cd1b71.chunk.js","mappings":"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","sources":["services/pdf/downloadPdf.js","services/db/jsonToCsv.js","services/db/exportStore.js","services/db/convertToJsonString.js","services/db/convertFromJsonString.js","services/db/csvToJson.js","services/db/importStores.js","services/db/clearStore.js","components/buttons/button.js","components/text/help-text.js","components/inputs/file.js","components/pages/settings/importStores.js","components/pages/settings/settings.js"],"sourcesContent":["\nimport pdfMake from \"pdfmake/build/pdfmake\";\nimport pdfFonts from \"pdfmake/build/vfs_fonts\";\npdfMake.vfs = pdfFonts.pdfMake.vfs;\n\nexport const downloadPdf = (publishers) => {\n  let docDefinition = {\n    content: [],\n    pageMargins: 10,\n  };\n  let family;\n  publishers\n    ?.filter((p) => !p.familyHead || p.id === p.familyHead )\n    .forEach(\n      (head) => (\n        (family = [\n          {\n            svg: `<svg height=\"20\" width=\"580\"><line x1=\"0\" y1=\"18\" x2=\"580\" y2=\"18\" stroke=\"#4a6da7\" style=\"stroke-width:2\" /></svg>`,\n          },\n          {\n            columns: [\n              {\n                text: head.lastName.toUpperCase(),\n                fontSize: 18,\n                bold: true,\n                width: \"25%\",\n              },\n              { text: head.homePhone, width: \"25%\" },\n              {\n                text: `${head.unitNumber ? `${head.unitNumber}/` : \"\"}${head.houseNumber\n                } ${head.street}, ${head.suburb}`,\n                fontSize: 13,\n              },\n            ],\n          },\n          {\n            columns: [\n              { text: head.firstName, width: \"25%\" },\n              { text: head.mobilePhone, width: \"25%\" },\n              {\n                text: head.personalEmail,\n              },\n            ],\n          },\n        ])\n        (publishers\n          ?.filter((p) => p.id !== head.id && p.familyHead === head.id)\n          .forEach((member) =>\n            family.push([\n              {\n                columns: [\n                  { text: member.firstName, width: \"25%\" },\n                  { text: member.mobilePhone, width: \"25%\" },\n                  {\n                    text: member.personalEmail,\n                  },\n                ],\n              },\n            ])\n          ))\n        (docDefinition.content.push({ stack: family, unbreakable: true }))\n      )\n    );\n    console.log(docDefinition)\n\n  pdfMake.createPdf(docDefinition).download(\"damo.pdf\");\n  // const pdfDocGenerator = pdfMake.createPdf(docDefinition);\n  // pdfDocGenerator.getDataUrl((dataUrl) => {\n  //   const targetElement = document.querySelector(\"#download\");\n  //   const iframe = document.createElement(\"iframe\");\n  //   iframe.src = dataUrl;\n  //   targetElement.appendChild(iframe);\n  //   iframe.classList.add(\"fixed\", \"w-screen\", \"h-screen\");\n  // });\n};","export const jsonToCsv = (json) => {\n  const array = [Object.keys(json[1])].concat(json)\n\n  return array.map(it => {\n    return Object.values(it).toString()\n  }).join('\\r')\n}\n","import { convertToJsonString } from \"./convertToJsonString\";\nimport { db } from \"./dexie\";\n\nexport const exportStore = (store, format) => {\n\n  db.open()\n    .then(function () {\n      const idbDatabase = db.backendDB(); // get native IDBDatabase object from Dexie wrapper\n      // export to JSON, clear database, and import from JSON\n      convertToJsonString(idbDatabase, store, format, function (err, jsonString) {\n        if (err) {\n          console.error(err);\n        } else {\n          var today = new Date();\n          var dd = String(today.getDate()).padStart(2, \"0\");\n          var mm = String(today.getMonth() + 1).padStart(2, \"0\"); //January is 0!\n          var yyyy = today.getFullYear();\n          let data = jsonString;\n          const type = format === \"csv\" ? { \"text/csv\": [\".csv\"] } : { \"application/json\": [\".json\"] }\n          let blob = new Blob([data], type);\n          const href = URL.createObjectURL(blob);\n          const a = Object.assign(document.createElement(\"a\"), {\n            href,\n            style: \"display:none\",\n            download: \"publishers \" + yyyy + \"-\" + mm + \"-\" + dd + \".\" + format,\n          });\n          document.body.appendChild(a);\n          a.click();\n          URL.revokeObjectURL(href);\n          a.remove();\n        }\n      });\n    })\n    .catch(function (e) {\n      console.error(\"Could not connect. \" + e);\n    });\n};\n","import { jsonToCsv } from \"./jsonToCsv\";\n\n export const convertToJsonString = (idbDatabase, store, format, cb) => {\n  const exportObject = {};\n    // const objectStoreNamesSet = new Set(idbDatabase.objectStoreNames);\n  const objectStoreNamesSet = [store];\n  const size = objectStoreNamesSet.size;\n  if (size === 0) {\n    cb(null, (format === \"csv\") ? jsonToCsv(exportObject[store]) : JSON.stringify(exportObject));\n  } else {\n    const objectStoreNames = Array.from(objectStoreNamesSet);\n    const transaction = idbDatabase.transaction(objectStoreNames, \"readonly\");\n    transaction.onerror = (event) => cb(event, null);\n\n    objectStoreNames.forEach((storeName) => {\n      const allObjects = [];\n      transaction.objectStore(storeName).openCursor().onsuccess = (event) => {\n        const cursor = event.target.result;\n        if (cursor) {\n          allObjects.push(cursor.value);\n          cursor.continue();\n        } else {\n          exportObject[storeName] = allObjects;\n          if (objectStoreNames.length === Object.keys(exportObject).length) { \n            cb(null, (format === \"csv\") ? jsonToCsv(exportObject[store]) : JSON.stringify(exportObject));\n          }\n        }\n      };\n    });\n  }\n}","import { csvToJson } from \"./csvToJson\";\n\nexport const convertFromJsonString = (idbDatabase, string, fileType, cb) => {\n  const objectStoreNamesSet = new Set(idbDatabase.objectStoreNames);\n  const size = objectStoreNamesSet.size;\n  if (size === 0) {\n    cb(null);\n  } else {\n    const objectStoreNames = Array.from(objectStoreNamesSet);\n    const transaction = idbDatabase.transaction(objectStoreNames, \"readwrite\");\n    transaction.onerror = (event) => alert(\"cb(event)\");\n\n    let json;\n    if (fileType === \"text/csv\") {\n      json = JSON.parse(`{\"publishers\": ${csvToJson(string)}}`);\n    } else {\n      json = JSON.parse(string);\n    }\n    const importObject = json;\n    console.log(json)\n\n    // Delete keys present in JSON that are not present in database\n    Object.keys(importObject).forEach((storeName) => {\n      if (!objectStoreNames.includes(storeName)) {\n        delete importObject[storeName];\n      }\n    });\n\n    if (Object.keys(importObject).length === 0) {\n      // no object stores exist to import for\n      cb(null);\n    }\n\n    objectStoreNames.forEach((storeName) => {\n      let count = 0;\n\n      const aux = Array.from(importObject[storeName] || []);\n\n      if (importObject[storeName] && aux.length > 0) {\n        aux.forEach((toAdd) => {\n          const request = transaction.objectStore(storeName).add(toAdd);\n          request.onsuccess = () => {\n            count++;\n            if (count === importObject[storeName].length) {\n              // added all objects for this store\n              delete importObject[storeName];\n              if (Object.keys(importObject).length === 0) {\n                // added all object stores\n                cb(null);\n              }\n            }\n          };\n          request.onerror = (event) => {\n            console.log(event);\n          };\n        });\n      } else {\n        if (importObject[storeName]) {\n          delete importObject[storeName];\n          if (Object.keys(importObject).length === 0) {\n            // added all object stores\n            cb(null);\n          }\n        }\n      }\n    });\n  }\n};\n","import { toTitleCase } from \"../formatting/letterCase\";\n\nexport function csvToJson(csv) {\n  var lines = csv.split(\"\\r\");\n  var result = [];\n  var headers = lines[0].split(\",\");\n\n  for (var i = 1; i < lines.length; i++) {\n    var obj = {};\n    var currentline = lines[i].split(\",\");\n    for (var j = 0; j < headers.length; j++) {\n      if (headers[j] === \"lastName\") {\n        obj[headers[j]] = toTitleCase(currentline[j]);\n      } else if (headers[j] === \"id\" || headers[j] === \"familyHead\") {\n        obj[headers[j]] = parseInt(currentline[j]);\n      } else {\n        obj[headers[j]] = currentline[j];\n      }\n    }\n    result.push(obj);\n  }\n\n  return JSON.stringify(result); //JSON\n}","import { clearStore } from \"./clearStore\";\nimport {convertFromJsonString} from \"./convertFromJsonString\"\nimport { db } from \"./dexie\";\n\nexport const importStores = (store) => {\n  let file = document.querySelector(\"#import-stores\").files[0];\n  let reader = new FileReader();\n  reader.onloadend = () => {\n    console.log(file.type)\n    clearStore(db.backendDB(), store);\n    convertFromJsonString(db.backendDB(), reader.result, file.type, (err) => {console.log(err)});\n  };\n  reader.readAsText(file);\n};\n"," export const clearStore = (idbDatabase, store, cb) => {\n  //   const objectStoreNamesSet = new Set(idbDatabase.objectStoreNames);\n    const objectStoreNamesSet = [store];\n    const size = objectStoreNamesSet.size;\n    if (size === 0) {\n      cb(null);\n    } else {\n      const objectStoreNames = Array.from(objectStoreNamesSet);\n      const transaction = idbDatabase.transaction(objectStoreNames, \"readwrite\");\n      transaction.onerror = (event) => cb(event);\n  \n      let count = 0;\n      objectStoreNames.forEach(function (storeName) {\n        transaction.objectStore(storeName).clear().onsuccess = () => {\n          count++;\n          if (count === size) {\n            // cleared all object stores\n            cb(null);\n          }\n        };\n      });\n    }\n  }\n  ","export const Button = ({ action, children }) => {\n  return (\n    <div\n      className=\"dark:bg-buttonD m-auto my-2 w-80 bg-button px-20 py-2 text-white dark:text-black\"\n      onClick={action}\n    >\n      {children}\n    </div>\n  );\n};\n","export const HelpText = ({addStyle, children}) => {\n  return (\n    <span className={\"inline-block align-baseline dark:text-white \" + addStyle}>{children}</span>\n  )\n}","import { useState } from \"react\";\nimport { Button } from \"../buttons/button\";\nimport { HelpText } from \"../text/help-text\";\n\nexport const FileInput = ({ id, label, helpText, types }) => {\n  const [text, setText] = useState(helpText);\n\n  return (\n    <>\n      <input\n        id={id}\n        type=\"file\"\n        accept={types}\n        hidden=\"hidden\"\n        onChange={(e) => {\n          setText(e.target.value.match(/[/\\\\]([\\w\\d\\s.\\-()]+)$/)[1]);\n        }}\n      />\n      <Button\n        action={() => {\n          const fileInput = document.getElementById(id);\n          fileInput.click();\n        }}\n      >\n        Choose File\n      </Button>\n      <HelpText addStyle=\"align-middle-xxx\">{text}</HelpText>\n    </>\n  );\n};\n","import { importStores } from \"../../../services/db/importStores\";\nimport { Card } from \"../../../temp/components/card\";\nimport { Button } from \"../../buttons/button\";\nimport { FileInput } from \"../../inputs/file\";\nimport { Text } from \"../../text/default\";\n\nexport const ImportStores = () => {\n  return (\n    <>\n      <Card className=\"relative m-4 bg-white p-2 text-center\">\n        <Text>Import Congregation</Text>\n        <FileInput\n          id=\"import-stores\"\n          label=\"\"\n          helpText=\"Select a .csv or .ord file\"\n          types=\".ord,.csv\"\n        />\n        {}\n        <Button\n          action={() => {\n            importStores(\"publishers\");\n          }}\n        >\n          Import\n        </Button>\n      </Card>\n    </>\n  );\n};\n","import { db } from \"../../../services/db/dexie\";\nimport { useLiveQuery } from \"dexie-react-hooks\";\nimport { Header } from \"../../main/header\";\nimport { Content } from \"../../main/content\";\n// import { useState } from \"react\";\n// import { Export } from \"./export\";\nimport { downloadPdf } from \"../../../services/pdf/downloadPdf\";\nimport { exportStore } from \"../../../services/db/exportStore\";\nimport { ImportStores } from \"./importStores\";\nimport { Card } from \"../../../temp/components/card\";\nimport { Text } from \"../../text/default\";\nimport { Heading } from \"../../text/heading\";\n\nexport const Settings = () => {\n  const publishers = useLiveQuery(() =>\n    db.publishers.orderBy(\"[lastName+firstName]\").toArray()\n  );\n  // const exportScreen = () => {};\n\n  // const importScreen = () => {};\n\n  // const [page, setPage] = useState(<Export />);\n\n  return (\n    <>\n      <Header\n        headerLeft={<div></div>}\n        title={<Heading>Settings</Heading>}\n        headerRight={<div className=\"text-header text-primary\"></div>}\n      />\n      <Content bgColor={\"bg-bgLightest dark:bg-black \"}>\n        <Card\n          className=\"m-4 bg-white p-4 text-center\"\n          action={() => {\n            downloadPdf(publishers);\n          }}\n        >\n          <Text>Export Congregation to PDF Contact List</Text>\n        </Card>\n        <Card\n          className=\"m-4 bg-white p-4 text-center\"\n          action={() => {\n            exportStore(\"publishers\", \"ord\");\n          }}\n        >\n          <Text>Export Congregation to Orderly file</Text>\n        </Card>\n        <Card\n          className=\"m-4 bg-white p-4 text-center\"\n          action={() => {\n            exportStore(\"publishers\", \"csv\");\n          }}\n        >\n          <Text>Export Congregation to CSV file</Text>\n        </Card>\n        <ImportStores />\n      </Content>\n    </>\n  );\n};\n"],"names":["pdfMake","pdfFonts","jsonToCsv","json","Object","keys","concat","map","it","values","toString","join","exportStore","store","format","db","then","idbDatabase","cb","exportObject","objectStoreNamesSet","size","JSON","stringify","objectStoreNames","Array","from","transaction","onerror","event","forEach","storeName","allObjects","objectStore","openCursor","onsuccess","cursor","target","result","push","value","continue","length","convertToJsonString","err","jsonString","console","error","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","blob","Blob","href","URL","createObjectURL","a","assign","document","createElement","style","download","body","appendChild","click","revokeObjectURL","remove","catch","e","convertFromJsonString","string","fileType","Set","alert","importObject","parse","csv","lines","split","headers","i","obj","currentline","j","toTitleCase","parseInt","csvToJson","log","includes","count","aux","toAdd","request","add","importStores","file","querySelector","files","reader","FileReader","onloadend","type","clear","clearStore","readAsText","Button","action","children","className","onClick","HelpText","addStyle","FileInput","id","helpText","label","types","useState","text","setText","accept","hidden","onChange","match","getElementById","ImportStores","Settings","publishers","useLiveQuery","toArray","headerLeft","title","headerRight","bgColor","family","docDefinition","content","pageMargins","filter","p","familyHead","head","svg","columns","lastName","toUpperCase","fontSize","bold","width","homePhone","unitNumber","houseNumber","street","suburb","firstName","mobilePhone","personalEmail","member","stack","unbreakable","downloadPdf"],"sourceRoot":""}